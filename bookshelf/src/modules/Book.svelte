<script>
    import { getContext } from 'svelte';

    import NavBar from '../lib/NavBar.svelte';
    import Carousel from '../lib/Carousel.svelte';
    import BubbleArray from '../lib/BubbleArray.svelte';

    export let book = {};

    const setActiveModule = getContext('setActiveModule');
    const addBookToCart = getContext('addBookToCart');

    let isAdded = false;

    const links = [
        { name: 'home', label: 'Home' },
        { name: 'search', label: 'Search' },
        { name: 'catalog', label: 'Catalog' },
        { name: 'cart', label: 'Cart' },
    ];

    function addBook(book) {
        addBookToCart(book);
        isAdded = true;
    }
</script>

<main>
    <NavBar links={links}/>
    <div class="Book_Info">
        <span class="Lside">
            <img src={book.img} alt={book.title} />
        </span>
        <span class="Rside">
            <h1 class="description">{book.title}</h1>
            <h2 class="description">Author: {book.author}</h2>
            <h2 class="description">Genre: {book.genre}</h2>
            <h3 class="description">Page Count: {book.pages}</h3>
        </span>
    </div>
    <div class="description">
        <p>Description:<br>{book.desc}</p>
    </div>
    <div class="buttons">
        <button on:click={() => setActiveModule('find')}>Find Now</button>
        <button on:click={() => addBook(book)}>Add to Cart</button>
    </div>
</main>

<style>
    .Book_Info {
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        padding: 20px;
        background-color: #f9f9f9; /* Subtle background color */
        border-radius: 8px; /* Rounded corners */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        margin-bottom: 20px; /* Space below the container */
        color: black; /* Text color */
    }
    .Lside, .Rside {
        flex: 1;
    }
    .Lside img {
        max-width: 200px; /* Set a maximum width for the image */
        height: auto;
    }
    .Rside {
        padding-left: 20px;
    }
    .description {
        margin-top: 20px;
        text-align: left; /* Ensure text is left-aligned */
        background-color: #f9f9f9; /* Subtle background color */
        padding: 10px; /* Padding for the description */
        border-radius: 8px; /* Rounded corners */
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        color: black; /* Text color */
    }
    .buttons {
        margin-top: 20px;
        display: flex;
        justify-content: center;
    }
    .buttons button {
        margin: 5px;
        padding: 10px 20px;
    }
</style>